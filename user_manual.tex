\documentclass[a4paper,titlepage,12pt]{article}

%% Language and font encodings
\usepackage[swedish]{babel}
\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{afterpage}
\usepackage[colorlinks=true, urlcolor=blue, linkcolor=black, pdfborder={0 0 0}]{hyperref}
\usepackage{longtable}
\usepackage[yyyymmdd]{datetime}
\usepackage[bottom]{footmisc}
\usepackage{titling}
\usepackage{pbox}
\usepackage{booktabs}
\usepackage{color, colortbl}
\definecolor{Gray}{gray}{0.9}
\usepackage{changepage, titlesec}

%Set page size
\usepackage{geometry}
\geometry{margin=3cm}
\usepackage{parskip} 
\setcounter{secnumdepth}{5}


\renewcommand{\dateseparator}{-}
\addto\captionsswedish{% Replace "swedish" with the language you use (if using babel)
  \renewcommand{\contentsname}%
    {Innehållsförteckning}%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Header and footer
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{fancyhdr}
\pagestyle{fancy}

\lhead{\includegraphics[scale=0.3]{images/logga.png}}
\chead{System för 3D-kopiering}
\rhead{\today}
\setlength\headheight{26pt} 


\lfoot{TDDD96 --- PUM}
\rfoot{Grupp 9}

\posttitle{\end{center}}

\begin{document}
\begin{titlepage}

% Title text
\topskip0pt
\vspace*{\fill}
\huge
\textbf{Användarmanual} \\
\Large
System för 3D-kopiering \\
\noindent\rule{17cm}{0.4pt}
\bigskip

\small
\textbf{Hampus Dunström \\
Olof Holmberg \\
Gustav Jannering \\
Michael Karlsson \\
Martin Lundberg \\
Hannes Tuhkala \\
Fredrik Wallström}
\bigskip
\bigskip

Handledare: Sam Le \\
Examinator: Kristian Sandahl

\date{\today}
\vspace*{\fill}

% Image 
\vspace*{\fill}
\begin{minipage}[b]{0.7\textwidth}
	\includegraphics[width=8cm]{images/liu-logga.png}
\end{minipage}
\begin{minipage}[b]{0.4\textwidth}
	\normalsize
	\textit{Linköpings universitet} \\
	\textit{SE-581 83 Linköping, Sverige}\\
	\textit{013-28 10 00, www.liu.se}
\end{minipage}

\end{titlepage}
\newpage
\begin{center}
\pagenumbering{gobble}

\tableofcontents
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					Dokumenthistorik
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \section*{\centering Dokumenthistorik}
  \renewcommand*{\arraystretch}{1.4}
 \centering
\scalebox{1.1}{
\begin{tabular}{|l|l|l|l|}
	\hline
    	\rowcolor{Gray}
	\textbf{Version} & \textbf{Datum} & \textbf{Utförda förändringar} & \textbf{Utförda av} \\
	\hline
    	0.1 & 2017-02-18 & Dokumentet skapades & Fredrik Wallström \\
    	\hline
		0.2 & 2017-02-18 & Första utkast & Fredrik Wallström \\
    	\hline
    	0.3 & 2017-05-02 & Manual för filtret & Martin Lundberg \\
    	\hline
    	0.4 & 2017-05-11 & Flyttade teknisk information till teknisk dokument & Hannes Tuhkala \\
    	\hline
\end{tabular}}
\end{center}
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					Introduction
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagenumbering{arabic}
\section{Inledning}
	Detta dokument är en användarmanual för 3D-kopieringsprojektet på Linköpings universitet. Projektet pågick under vårterminen 2017 och utfördes av sju stycken studenter ifrån universitetet. Projektet är en del i kursen TDDD96 - Kandidatprojekt i programvaruutveckling som ges vid Linköpings universitet. Användarmanualen beskriver hur produkten används.
	\subsection{Parter}
		Under projektets gång fanns följande parter aktiva:
		
		\begin{itemize}
			\item Beställare \& Kund: Maria Magnusson, Linköpings universitet ISY
			\item Examinator: Kristian Sandahl
			\item Handledare: Sam Le
			\item Projektgrupp: 3D-Kopiering
		\end{itemize}
		
	\subsection{Definitioner}
		Nedan följer definitioner och ordval som används i denna användarmanual.
		
		\begin{itemize}
			\item ISY - Institutionen för systemteknik
			\item ICP - Iterative closest point (iterativ närmast punkt)
			\item PCL - Point cloud library
		\end{itemize}
    
\newpage  

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					Använda systemet
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Att använda systemet}
	Som användare av systemet finns det två stycken sätt att använda systemet, ett kommandoradsgränssnitt, 3DCopy, samt ett grafiskt användargränssnitt. Med hjälp av dessa gränssnitt är det möjligt att ta en uppsättning av icke kompletta punktmoln för att generera en utskriftsbar 3D-mesh. Gränssnitten är anpassade för att ta in en uppsättning av punktmoln (.pcd-filer). För att använda systemet kan det vara vettigt att filtrera de punktmoln som är tänkta att använda. Därför har det skapas ett filtreringsprogram som filtrerar bort skräppunkter ur ett punktmoln.
	
	\subsection{Att använda filtreringen}
	För att använda filtret finns ett separat program som körs genom att anropa \texttt{filter} i terminalen. Användningen av filtret ser ut som följande:
	
	\texttt{filter [options] sources}
	
	där options är valfria flaggor att skicka in till filtret och sources är en eller fler pcd-filer eller mappar med pcd-filter som ska filtreras.
	
	Filtret går igenom alla pcd-filer och mappar som skickas in och filtrera dem. Då filer skickas in till filtret sparas resultatet i en ny fil med namnet originalnamn\_filtered.pcd och då mappar skickas in skapas en ny mapp med namnet originalnamn\_filtered där de filtrerade filerna sparas.
	
	De flaggor som kan skickas in till programmet visas i tabell \ref{tab:filter_flaggor}.
	
	\begin{table}[h!]
		\centering
		\caption{Flaggor för filtret.}
		\label{tab:filter_flaggor}
		
		\begin{tabular}{p{0.2\linewidth}p{0.6\linewidth}}
			Flagga & Förklaring \\
			\hline
			-h, \texttt{--}help & Skriver ut en hjälptext för filtret i terminalen. \\
			\hline
			-c, \texttt{--}cutoff\_height & Anger hur högt upp objektet som skannades satt. Ange ett högre värde för objekt som satt längre ner, d.v.s. närmare bottenplattan på rotationsbordet. \\
			\hline
			-s, \texttt{--}scale & Anger hur mycket objektet ska skalas på bredden för att få rätt proportioner. Det rekommenderas att köra skanningar med cart\_speed=200 och låta denna inställning ha sitt standardvärde (0.5). \\
			\hline
		\end{tabular}
	
	\end{table}

	Filtret kan även användas i vidareutveckling av systemet genom att inkludera klassen \texttt{Filter.h} och använda filtret i C++.
	
	\subsection{Att använda webbapplikationen}
	
	\subsection{Att använda kommandoradsgränsnittet}
		För att använda programmet 3DCopy så kör man kommandot:
		
		\texttt{./3DCopy pcdfile1 pcdfile2 pcdfile3 ... outputfile}
		
		Där godtyckligt antal pcdfiler kan väljas. Dessa punktmoln kommer sedan att registreras och efter det kommer en mesh att genereras med \textit{outputfile} som det givna filnamnet. Ett exempel på hur man använder programmet från kommandoraden ser ut såhär:
		
		\texttt{./3DCopy pcd\_file\_1 pcd\_file\_2 result}
		
		Detta kommer alltså att generera en mesh med filnamn \textit{result} som sparas i ett .stl format. Denna fil kan sedan användas för att inspekteras i till exempel meshlab eller liknande program. Det går också att skriva ut objektet med en 3D-skrivare. Det som är värt att nämna är att programmet kan även ta in en mapp fylld med pcd-filer istället för enstaka pcd-filer som ska behandlas. Programmet söker då automatisk igenom mappen och plockar ut de filer som ska registreras, exempel på hur detta ser ut:
		
		\texttt{./3DCopy map\_with\_files result}
		
		Programmet 3DCopy innehåller ett antal underkommandon enligt formen
		
		\texttt{./3DCopy [kommando] pcdfile1 pcdfile2 pcdfile3 ... outputfile}
		
		Detta ger en möjlighet för användaren att välja vilken komponent som ska köras. Användaren kan enbart välja att köra meshningskomponenten eller registreringskomponenten. De kommandon som finns tillgängliga beskrivs nedan i tabell \ref{tab:flaggor_cli}.
		
		\begin{table}[h!]
			\centering
			\caption{Flaggor/kommandon för CLI.}
			\label{tab:flaggor_cli}
			
			\begin{tabular}{p{0.2\linewidth}p{0.6\linewidth}}
				Flagga & Förklaring \\
				\hline
				\texttt{-m} & Enbart mesha objektet utifrån ett givet komplett punktmoln. \\
				\hline
				\texttt{-r} & Enbart registrera punktmoln för att generera ett komplett punktmoln, hoppar över meshningen. \\
				\hline
				\texttt{-v} & Gör att programmet talar om mer nödvändig information om vad som händer till användaren. \\
				\hline
			\end{tabular}
		\end{table}	
		
		För att enbart registrera punktmoln kan således detta kommando användas:
		
		\texttt{./3DCopy -r pcdfile1 pcdfile2 pcdfile3 ... outputfile}
\newpage
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%					Felsökning
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Felsökning}
 	%% Skriv om eventuella tips till att felsöka diverse problem
\newpage
    
\section{Installation}
	%% Skriva om hur man installerar vårt system?
\newpage

\end{document}

